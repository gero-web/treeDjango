{% load static %}
<link rel="stylesheet" href="{% static 'css/style.css' %}">

<nav>
   <ul id="myUL"> 
       <li> 
            <span class="caret
                {% if  request.get_full_path in link.name %} 
                    caret-down 
                {% endif %}">
                    {{link.name}} 
            </span>  
            <ul class="nested
                {% if  request.get_full_path in link.name %} 
                    active
                {% endif %}
            ">
                {% for node in link.submenu_set.all %} 
                    {% include "all.html" %}
                {% endfor %} 
            </ul>
        </li>
    </ul>
<nav/>

<script>

    let toggler = document.getElementsByClassName("caret");
    
    for (let i = 0; i < toggler.length; i++) {
        toggler[i].addEventListener("click", function() {
            this.parentElement.querySelector(".nested").classList.toggle("active");
            this.classList.toggle("caret-down");
        });
    }
</script>
